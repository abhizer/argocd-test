# Stop ArgoCD from being publicly reachable.
# Set annotations to make it accessible only through Tailscale.
apiVersion: v1
kind: Service
metadata:
    name: argo-cd-argocd-server
    namespace: argocd
    annotations:
        tailscale.com/expose: "true"
        tailscale.com/hostname: "argocd"
        argocd.argoproj.io/sync-wave: "20"
        argocd.argoproj.io/sync-options: "Replace=true"
spec:
    type: ClusterIP
    selector:
        app.kubernetes.io/name: argocd-server
    ports:
        - name: https
          port: 443
          targetPort: 8080
